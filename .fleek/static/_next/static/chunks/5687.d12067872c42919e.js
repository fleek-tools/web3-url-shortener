"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5687],{45687:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r=n(85893),o=n(67294),a=n(4266),s=n(92321),l=n(81134),i=n(82002),c=n(45962),d=n(7583),u=JSON.parse('{"M":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"shortCode","type":"string"},{"indexed":false,"internalType":"string","name":"longUrl","type":"string"}],"name":"URLShortened","type":"event"},{"inputs":[{"internalType":"string","name":"shortCode","type":"string"}],"name":"getURL","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"shortCode","type":"string"},{"internalType":"string","name":"longUrl","type":"string"}],"name":"setURL","outputs":[],"stateMutability":"nonpayable","type":"function"}]}');function g(){let[e,t]=(0,o.useState)(""),[n,g]=(0,o.useState)(""),[h,f]=(0,o.useState)(""),[p,m]=(0,o.useState)(""),[x,y]=(0,o.useState)(""),{address:w,isConnected:b}=(0,s.m)(),{data:k}=(0,l.p)(),v=(0,i.x)(),[N,j]=(0,o.useState)(null);async function C(){if(console.log("Starting shortenURL function..."),f(""),!b){alert("Please connect your wallet first.");return}if(421614!==v){alert("Please switch to the Arbitrum Sepolia testnet in your wallet.");return}if(!e||!n){alert("Please enter both a short code and a long URL.");return}if(!N){console.error("No signer available"),alert("No signer available. Please ensure your wallet is connected.");return}try{f("Transaction pending..."),console.log("Getting contract instance...");let t=function(e){if(!e)throw console.error("No signer provided to getSignerContract"),Error("No signer available");let t="0x2729D62B3cde6fd2263dF5e3c6509F87C6C05892";if(console.log("Contract configuration:",{address:t,hasABI:!!u.M,signer:!!e}),!t)throw Error("Contract address not configured");return new d.CH(t,u.M,e)}(N);console.log("Contract instance obtained:",t.target),console.log("Sending transaction to set URL:",{shortCode:e,longUrl:n});let r=await t.setURL(e,n);console.log("Transaction sent. Hash:",r.hash),f("Transaction sent. Hash: ".concat(r.hash)),console.log("Waiting for transaction confirmation...");let o=await r.wait();console.log("Transaction confirmed:",o);let a="".concat(window.location.origin,"/").concat(e);m(a),f("Transaction successful!"),console.log("Shortened URL created: ".concat(a))}catch(e){console.error("Detailed error in shortenURL:",e),f("Error occurred: ".concat(e.message||"Unknown error"))}}return(0,o.useEffect)(()=>{if(window.ethereum&&b&&k)console.log("Setting up ethers provider..."),new a.Q(window.ethereum).getSigner().then(e=>{console.log("Signer obtained:",e),j(e)}).catch(e=>{console.error("Error getting signer:",e),j(null)});else{var e;console.log("Conditions not met for signer setup:",{windowExists:!0,ethereumExists:!!(null===(e=window)||void 0===e?void 0:e.ethereum),isConnected:b,hasWalletClient:!!k}),j(null)}},[b,k]),(0,o.useEffect)(()=>{b&&421614!==v?(f("Please switch to the Arbitrum Sepolia testnet in your wallet."),console.log("Wrong chain ID:",v)):f("")},[b,v]),(0,r.jsxs)("div",{className:"w-full max-w-md space-y-8 bg-gray-dark-2 p-10 rounded-xl shadow-2xl border border-gray-dark-4",children:[(0,r.jsx)("h1",{className:"werey text-3xl text-center font-extrabold text-yellow-dark-9",children:"Web3 URL Shortener"}),(0,r.jsx)("div",{className:"flex sm:flex-row justify-center items-center gap-4",children:(0,r.jsx)(c.NL,{})}),(0,r.jsxs)("div",{className:"mt-8 space-y-6",children:[b&&(0,r.jsxs)("p",{className:"text-center text-sm text-gray-dark-11",children:["Connected: ",null==w?void 0:w.slice(0,6),"...",null==w?void 0:w.slice(-4)]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"shortCode",className:"sr-only",children:"Short code"}),(0,r.jsx)("input",{id:"shortCode",type:"text",placeholder:"Short code (e.g. abc123)",value:e,onChange:e=>t(e.target.value),className:"w-full text-black px-3 py-2 bg-gray-dark-3 border border-gray-dark-6 rounded-md placeholder-gray-dark-8 text-gray-dark-12 focus:outline-none focus:ring-2 focus:ring-yellow-dark-9 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"longUrl",className:"sr-only",children:"Long URL"}),(0,r.jsx)("input",{id:"longUrl",type:"text",placeholder:"Long URL (e.g. https://example.com)",value:n,onChange:e=>g(e.target.value),className:"w-full px-3 text-black py-2 bg-gray-dark-3 border border-gray-dark-6 rounded-md placeholder-gray-dark-8 text-gray-dark-12 focus:outline-none focus:ring-2 focus:ring-yellow-dark-9 focus:border-transparent"})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:C,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md text-sm font-medium ".concat(b&&!h.includes("Transaction pending")?"bg-yellow-600 text-gray-dark-1 hover:bg-yellow-dark-10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-dark-9":"bg-yellow-900 text-gray-dark-8 cursor-not-allowed"),disabled:!b||h.includes("Transaction pending"),children:h.includes("Transaction pending")?"Processing...":"Shorten"})})]}),h&&(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsx)("p",{className:"font-medium break-words ".concat(h.includes("Error")?"text-red-dark-11":"text-yellow-dark-11"),children:h})}),p&&(0,r.jsxs)("div",{className:"mt-4 text-center",children:[(0,r.jsxs)("p",{className:"font-medium text-yellow-dark-9",children:["Shortened URL:"," ",(0,r.jsx)("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"underline",children:p}),(0,r.jsx)("button",{onClick:()=>{p&&(navigator.clipboard.writeText(p),y("Copied!"),setTimeout(()=>y(""),2e3))},className:"ml-2 text-sm text-yellow-400 hover:text-yellow-dark-10 focus:outline-none focus:ring-2 focus:ring-yellow-dark-9 focus:ring-offset-2 rounded",children:"Copy"})]}),x&&(0,r.jsx)("p",{className:"text-yellow-dark-11 mt-2",children:x})]})]})}}}]);